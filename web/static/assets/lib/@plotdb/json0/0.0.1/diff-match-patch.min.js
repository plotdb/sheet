!function(t){if("object"==typeof exports&&"undefined"!=typeof module){module.exports=t()}else if("function"==typeof define&&define.amd){define([],t)}else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).diffMatchPatch=t()}}(function(){var t={},e=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32};e.Diff=function(t,e){return[t,e]},e.prototype.diff_main=function(t,n,i,r){void 0===r&&(r=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var f=r;if(null==t||null==n){throw new Error("Null input. (diff_main)")}if(t==n){return t?[new e.Diff(0,t)]:[]}void 0===i&&(i=!0);var h=i,s=this.diff_commonPrefix(t,n),a=t.substring(0,s);t=t.substring(s),n=n.substring(s),s=this.diff_commonSuffix(t,n);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),n=n.substring(0,n.length-s);var g=this.diff_compute_(t,n,h,f);return a&&g.unshift(new e.Diff(0,a)),l&&g.push(new e.Diff(0,l)),this.diff_cleanupMerge(g),g},e.prototype.diff_compute_=function(t,n,i,r){var f;if(!t){return[new e.Diff(1,n)]}if(!n){return[new e.Diff(-1,t)]}var h=t.length>n.length?t:n,s=t.length>n.length?n:t,a=h.indexOf(s);if(-1!=a){return f=[new e.Diff(1,h.substring(0,a)),new e.Diff(0,s),new e.Diff(1,h.substring(a+s.length))],t.length>n.length&&(f[0][0]=f[2][0]=-1),f}if(1==s.length){return[new e.Diff(-1,t),new e.Diff(1,n)]}var l=this.diff_halfMatch_(t,n);if(l){var g=l[0],o=l[1],c=l[2],u=l[3],p=l[4],d=this.diff_main(g,c,i,r),_=this.diff_main(o,u,i,r);return d.concat([new e.Diff(0,p)],_)}return i&&t.length>100&&n.length>100?this.diff_lineMode_(t,n,r):this.diff_bisect_(t,n,r)},e.prototype.diff_lineMode_=function(t,n,i){var r=this.diff_linesToChars_(t,n);t=r.chars1,n=r.chars2;var f=r.lineArray,h=this.diff_main(t,n,!1,i);this.diff_charsToLines_(h,f),this.diff_cleanupSemantic(h),h.push(new e.Diff(0,""));for(var s=0,a=0,l=0,g="",o="";s<h.length;){switch(h[s][0]){case 1:l++,o+=h[s][1];break;case-1:a++,g+=h[s][1];break;case 0:if(a>=1&&l>=1){h.splice(s-a-l,a+l),s=s-a-l;for(var c=this.diff_main(g,o,!1,i),u=c.length-1;u>=0;u--){h.splice(s,0,c[u])}s+=c.length}l=0,a=0,g="",o=""}s++}return h.pop(),h},e.prototype.diff_bisect_=function(t,n,i){for(var r=t.length,f=n.length,h=Math.ceil((r+f)/2),s=h,a=2*h,l=new Array(a),g=new Array(a),o=0;o<a;o++){l[o]=-1,g[o]=-1}l[s+1]=0,g[s+1]=0;for(var c=r-f,u=c%2!=0,p=0,d=0,_=0,b=0,v=0;v<h&&!((new Date).getTime()>i);v++){for(var m=-v+p;m<=v-d;m+=2){for(var w=s+m,M=(k=m==-v||m!=v&&l[w-1]<l[w+1]?l[w+1]:l[w-1]+1)-m;k<r&&M<f&&t.charAt(k)==n.charAt(M);){k++,M++}if(l[w]=k,k>r){d+=2}else if(M>f){p+=2}else if(u&&(D=s+c-m)>=0&&D<a&&-1!=g[D]&&k>=(y=r-g[D])){return this.diff_bisectSplit_(t,n,k,M,i)}}for(var x=-v+_;x<=v-b;x+=2){for(var y,D=s+x,A=(y=x==-v||x!=v&&g[D-1]<g[D+1]?g[D+1]:g[D-1]+1)-x;y<r&&A<f&&t.charAt(r-y-1)==n.charAt(f-A-1);){y++,A++}if(g[D]=y,y>r){b+=2}else if(A>f){_+=2}else if(!u){var k;if((w=s+c-x)>=0&&w<a&&-1!=l[w]){if(M=s+(k=l[w])-w,k>=(y=r-y)){return this.diff_bisectSplit_(t,n,k,M,i)}}}}}return[new e.Diff(-1,t),new e.Diff(1,n)]},e.prototype.diff_bisectSplit_=function(t,e,n,i,r){var f=t.substring(0,n),h=e.substring(0,i),s=t.substring(n),a=e.substring(i),l=this.diff_main(f,h,!1,r),g=this.diff_main(s,a,!1,r);return l.concat(g)},e.prototype.diff_linesToChars_=function(t,e){var n=[],i={};function r(t){for(var e="",r=0,h=-1,s=n.length;h<t.length-1;){-1==(h=t.indexOf("\n",r))&&(h=t.length-1);var a=t.substring(r,h+1);(i.hasOwnProperty?i.hasOwnProperty(a):void 0!==i[a])?e+=String.fromCharCode(i[a]):(s==f&&(a=t.substring(r),h=t.length),e+=String.fromCharCode(s),i[a]=s,n[s++]=a),r=h+1}return e}n[0]="";var f=4e4,h=r(t);return f=65535,{chars1:h,chars2:r(e),lineArray:n}},e.prototype.diff_charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var i=t[n][1],r=[],f=0;f<i.length;f++){r[f]=e[i.charCodeAt(f)]}t[n][1]=r.join("")}},e.prototype.diff_commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0)){return 0}for(var n=0,i=Math.min(t.length,e.length),r=i,f=0;n<r;){t.substring(f,r)==e.substring(f,r)?f=n=r:i=r,r=Math.floor((i-n)/2+n)}return r},e.prototype.diff_commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1)){return 0}for(var n=0,i=Math.min(t.length,e.length),r=i,f=0;n<r;){t.substring(t.length-r,t.length-f)==e.substring(e.length-r,e.length-f)?f=n=r:i=r,r=Math.floor((i-n)/2+n)}return r},e.prototype.diff_commonOverlap_=function(t,e){var n=t.length,i=e.length;if(0==n||0==i){return 0}n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e){return r}for(var f=0,h=1;;){var s=t.substring(r-h),a=e.indexOf(s);if(-1==a){return f}h+=a,0!=a&&t.substring(r-h)!=e.substring(0,h)||(f=h,h++)}},e.prototype.diff_halfMatch_=function(t,e){if(this.Diff_Timeout<=0){return null}var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length){return null}var r=this;function f(t,e,n){for(var i,f,h,s,a=t.substring(n,n+Math.floor(t.length/4)),l=-1,g="";-1!=(l=e.indexOf(a,l+1));){var o=r.diff_commonPrefix(t.substring(n),e.substring(l)),c=r.diff_commonSuffix(t.substring(0,n),e.substring(0,l));g.length<c+o&&(g=e.substring(l-c,l)+e.substring(l,l+o),i=t.substring(0,n-c),f=t.substring(n+o),h=e.substring(0,l-c),s=e.substring(l+o))}return 2*g.length>=t.length?[i,f,h,s,g]:null}var h,s,a,l,g,o=f(n,i,Math.ceil(n.length/4)),c=f(n,i,Math.ceil(n.length/2));return o||c?(h=c?o&&o[4].length>c[4].length?o:c:o,t.length>e.length?(s=h[0],a=h[1],l=h[2],g=h[3]):(l=h[0],g=h[1],s=h[2],a=h[3]),[s,a,l,g,h[4]]):null},e.prototype.diff_cleanupSemantic=function(t){for(var n=!1,i=[],r=0,f=null,h=0,s=0,a=0,l=0,g=0;h<t.length;){0==t[h][0]?(i[r++]=h,s=l,a=g,l=0,g=0,f=t[h][1]):(1==t[h][0]?l+=t[h][1].length:g+=t[h][1].length,f&&f.length<=Math.max(s,a)&&f.length<=Math.max(l,g)&&(t.splice(i[r-1],0,new e.Diff(-1,f)),t[i[r-1]+1][0]=1,r--,h=--r>0?i[r-1]:-1,s=0,a=0,l=0,g=0,f=null,n=!0)),h++}for(n&&this.diff_cleanupMerge(t),this.diff_cleanupSemanticLossless(t),h=1;h<t.length;){if(-1==t[h-1][0]&&1==t[h][0]){var o=t[h-1][1],c=t[h][1],u=this.diff_commonOverlap_(o,c),p=this.diff_commonOverlap_(c,o);u>=p?(u>=o.length/2||u>=c.length/2)&&(t.splice(h,0,new e.Diff(0,c.substring(0,u))),t[h-1][1]=o.substring(0,o.length-u),t[h+1][1]=c.substring(u),h++):(p>=o.length/2||p>=c.length/2)&&(t.splice(h,0,new e.Diff(0,o.substring(0,p))),t[h-1][0]=1,t[h-1][1]=c.substring(0,c.length-p),t[h+1][0]=-1,t[h+1][1]=o.substring(p),h++),h++}h++}},e.prototype.diff_cleanupSemanticLossless=function(t){function n(t,n){if(!t||!n){return 6}var i=t.charAt(t.length-1),r=n.charAt(0),f=i.match(e.nonAlphaNumericRegex_),h=r.match(e.nonAlphaNumericRegex_),s=f&&i.match(e.whitespaceRegex_),a=h&&r.match(e.whitespaceRegex_),l=s&&i.match(e.linebreakRegex_),g=a&&r.match(e.linebreakRegex_),o=l&&t.match(e.blanklineEndRegex_),c=g&&n.match(e.blanklineStartRegex_);return o||c?5:l||g?4:f&&!s&&a?3:s||a?2:f||h?1:0}for(var i=1;i<t.length-1;){if(0==t[i-1][0]&&0==t[i+1][0]){var r=t[i-1][1],f=t[i][1],h=t[i+1][1],s=this.diff_commonSuffix(r,f);if(s){var a=f.substring(f.length-s);r=r.substring(0,r.length-s),f=a+f.substring(0,f.length-s),h=a+h}for(var l=r,g=f,o=h,c=n(r,f)+n(f,h);f.charAt(0)===h.charAt(0);){r+=f.charAt(0),f=f.substring(1)+h.charAt(0),h=h.substring(1);var u=n(r,f)+n(f,h);u>=c&&(c=u,l=r,g=f,o=h)}t[i-1][1]!=l&&(l?t[i-1][1]=l:(t.splice(i-1,1),i--),t[i][1]=g,o?t[i+1][1]=o:(t.splice(i+1,1),i--))}i++}},e.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,e.whitespaceRegex_=/\s/,e.linebreakRegex_=/[\r\n]/,e.blanklineEndRegex_=/\n\r?\n$/,e.blanklineStartRegex_=/^\r?\n\r?\n/,e.prototype.diff_cleanupEfficiency=function(t){for(var n=!1,i=[],r=0,f=null,h=0,s=!1,a=!1,l=!1,g=!1;h<t.length;){0==t[h][0]?(t[h][1].length<this.Diff_EditCost&&(l||g)?(i[r++]=h,s=l,a=g,f=t[h][1]):(r=0,f=null),l=g=!1):(-1==t[h][0]?g=!0:l=!0,f&&(s&&a&&l&&g||f.length<this.Diff_EditCost/2&&s+a+l+g==3)&&(t.splice(i[r-1],0,new e.Diff(-1,f)),t[i[r-1]+1][0]=1,r--,f=null,s&&a?(l=g=!0,r=0):(h=--r>0?i[r-1]:-1,l=g=!1),n=!0)),h++}n&&this.diff_cleanupMerge(t)},e.prototype.diff_cleanupMerge=function(t){t.push(new e.Diff(0,""));for(var n,i=0,r=0,f=0,h="",s="";i<t.length;){switch(t[i][0]){case 1:f++,s+=t[i][1],i++;break;case-1:r++,h+=t[i][1],i++;break;case 0:r+f>1?(0!==r&&0!==f&&(0!==(n=this.diff_commonPrefix(s,h))&&(i-r-f>0&&0==t[i-r-f-1][0]?t[i-r-f-1][1]+=s.substring(0,n):(t.splice(0,0,new e.Diff(0,s.substring(0,n))),i++),s=s.substring(n),h=h.substring(n)),0!==(n=this.diff_commonSuffix(s,h))&&(t[i][1]=s.substring(s.length-n)+t[i][1],s=s.substring(0,s.length-n),h=h.substring(0,h.length-n))),i-=r+f,t.splice(i,r+f),h.length&&(t.splice(i,0,new e.Diff(-1,h)),i++),s.length&&(t.splice(i,0,new e.Diff(1,s)),i++),i++):0!==i&&0==t[i-1][0]?(t[i-1][1]+=t[i][1],t.splice(i,1)):i++,f=0,r=0,h="",s=""}}""===t[t.length-1][1]&&t.pop();var a=!1;for(i=1;i<t.length-1;){0==t[i-1][0]&&0==t[i+1][0]&&(t[i][1].substring(t[i][1].length-t[i-1][1].length)==t[i-1][1]?(t[i][1]=t[i-1][1]+t[i][1].substring(0,t[i][1].length-t[i-1][1].length),t[i+1][1]=t[i-1][1]+t[i+1][1],t.splice(i-1,1),a=!0):t[i][1].substring(0,t[i+1][1].length)==t[i+1][1]&&(t[i-1][1]+=t[i+1][1],t[i][1]=t[i][1].substring(t[i+1][1].length)+t[i+1][1],t.splice(i+1,1),a=!0)),i++}a&&this.diff_cleanupMerge(t)},e.prototype.diff_xIndex=function(t,e){var n,i=0,r=0,f=0,h=0;for(n=0;n<t.length&&(1!==t[n][0]&&(i+=t[n][1].length),-1!==t[n][0]&&(r+=t[n][1].length),!(i>e));n++){f=i,h=r}return t.length!=n&&-1===t[n][0]?h:h+(e-f)},e.prototype.diff_prettyHtml=function(t){for(var e=[],n=/&/g,i=/</g,r=/>/g,f=/\n/g,h=0;h<t.length;h++){var s=t[h][0],a=t[h][1].replace(n,"&amp;").replace(i,"&lt;").replace(r,"&gt;").replace(f,"&para;<br>");switch(s){case 1:e[h]='<ins style="background:#e6ffe6;">'+a+"</ins>";break;case-1:e[h]='<del style="background:#ffe6e6;">'+a+"</del>";break;case 0:e[h]="<span>"+a+"</span>"}}return e.join("")},e.prototype.diff_text1=function(t){for(var e=[],n=0;n<t.length;n++){1!==t[n][0]&&(e[n]=t[n][1])}return e.join("")},e.prototype.diff_text2=function(t){for(var e=[],n=0;n<t.length;n++){-1!==t[n][0]&&(e[n]=t[n][1])}return e.join("")},e.prototype.diff_levenshtein=function(t){for(var e=0,n=0,i=0,r=0;r<t.length;r++){var f=t[r][0],h=t[r][1];switch(f){case 1:n+=h.length;break;case-1:i+=h.length;break;case 0:e+=Math.max(n,i),n=0,i=0}}return e+Math.max(n,i)},e.prototype.diff_toDelta=function(t){for(var e=[],n=0;n<t.length;n++){switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}}return e.join("\t").replace(/%20/g," ")},e.prototype.diff_fromDelta=function(t,n){for(var i=[],r=0,f=0,h=n.split(/\t/g),s=0;s<h.length;s++){var a=h[s].substring(1);switch(h[s].charAt(0)){case"+":try{i[r++]=new e.Diff(1,decodeURI(a))}catch(o){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0){throw new Error("Invalid number in diff_fromDelta: "+a)}var g=t.substring(f,f+=l);"="==h[s].charAt(0)?i[r++]=new e.Diff(0,g):i[r++]=new e.Diff(-1,g);break;default:if(h[s]){throw new Error("Invalid diff operation in diff_fromDelta: "+h[s])}}}if(f!=t.length){throw new Error("Delta length ("+f+") does not equal source text length ("+t.length+").")}return i},e.prototype.match_main=function(t,e,n){if(null==t||null==e||null==n){throw new Error("Null input. (match_main)")}return n=Math.max(0,Math.min(n,t.length)),t==e?0:t.length?t.substring(n,n+e.length)==e?n:this.match_bitap_(t,e,n):-1},e.prototype.match_bitap_=function(t,e,n){if(e.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var i=this.match_alphabet_(e),r=this;function f(t,i){var f=t/e.length,h=Math.abs(n-i);return r.Match_Distance?f+h/r.Match_Distance:h?1:f}var h=this.Match_Threshold,s=t.indexOf(e,n);-1!=s&&(h=Math.min(f(0,s),h),-1!=(s=t.lastIndexOf(e,n+e.length))&&(h=Math.min(f(0,s),h)));var a,l,g=1<<e.length-1;s=-1;for(var o,c=e.length+t.length,u=0;u<e.length;u++){for(a=0,l=c;a<l;){f(u,n+l)<=h?a=l:c=l,l=Math.floor((c-a)/2+a)}c=l;var p=Math.max(1,n-l+1),d=Math.min(n+l,t.length)+e.length,_=Array(d+2);_[d+1]=(1<<u)-1;for(var b=d;b>=p;b--){var v=i[t.charAt(b-1)];if(_[b]=0===u?(_[b+1]<<1|1)&v:(_[b+1]<<1|1)&v|(o[b+1]|o[b])<<1|1|o[b+1],_[b]&g){var m=f(u,b-1);if(m<=h){if(h=m,!((s=b-1)>n)){break}p=Math.max(1,2*n-s)}}}if(f(u+1,n)>h){break}o=_}return s},e.prototype.match_alphabet_=function(t){for(var e={},n=0;n<t.length;n++){e[t.charAt(n)]=0}for(n=0;n<t.length;n++){e[t.charAt(n)]|=1<<t.length-n-1}return e},e.prototype.patch_addContext_=function(t,n){if(0!=n.length){if(null===t.start2){throw Error("patch not initialized")}for(var i=n.substring(t.start2,t.start2+t.length1),r=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;){r+=this.Patch_Margin,i=n.substring(t.start2-r,t.start2+t.length1+r)}r+=this.Patch_Margin;var f=n.substring(t.start2-r,t.start2);f&&t.diffs.unshift(new e.Diff(0,f));var h=n.substring(t.start2+t.length1,t.start2+t.length1+r);h&&t.diffs.push(new e.Diff(0,h)),t.start1-=f.length,t.start2-=f.length,t.length1+=f.length+h.length,t.length2+=f.length+h.length}},e.prototype.patch_make=function(t,n,i){var r,f;if("string"==typeof t&&"string"==typeof n&&void 0===i){r=t,(f=this.diff_main(r,n,!0)).length>2&&(this.diff_cleanupSemantic(f),this.diff_cleanupEfficiency(f))}else if(t&&"object"==typeof t&&void 0===n&&void 0===i){f=t,r=this.diff_text1(f)}else if("string"==typeof t&&n&&"object"==typeof n&&void 0===i){r=t,f=n}else{if("string"!=typeof t||"string"!=typeof n||!i||"object"!=typeof i){throw new Error("Unknown call format to patch_make.")}r=t,f=i}if(0===f.length){return[]}for(var h=[],s=new e.patch_obj,a=0,l=0,g=0,o=r,c=r,u=0;u<f.length;u++){var p=f[u][0],d=f[u][1];switch(a||0===p||(s.start1=l,s.start2=g),p){case 1:s.diffs[a++]=f[u],s.length2+=d.length,c=c.substring(0,g)+d+c.substring(g);break;case-1:s.length1+=d.length,s.diffs[a++]=f[u],c=c.substring(0,g)+c.substring(g+d.length);break;case 0:d.length<=2*this.Patch_Margin&&a&&f.length!=u+1?(s.diffs[a++]=f[u],s.length1+=d.length,s.length2+=d.length):d.length>=2*this.Patch_Margin&&a&&(this.patch_addContext_(s,o),h.push(s),s=new e.patch_obj,a=0,o=c,l=g)}1!==p&&(l+=d.length),-1!==p&&(g+=d.length)}return a&&(this.patch_addContext_(s,o),h.push(s)),h},e.prototype.patch_deepCopy=function(t){for(var n=[],i=0;i<t.length;i++){var r=t[i],f=new e.patch_obj;f.diffs=[];for(var h=0;h<r.diffs.length;h++){f.diffs[h]=new e.Diff(r.diffs[h][0],r.diffs[h][1])}f.start1=r.start1,f.start2=r.start2,f.length1=r.length1,f.length2=r.length2,n[i]=f}return n},e.prototype.patch_apply=function(t,e){if(0==t.length){return[e,[]]}t=this.patch_deepCopy(t);var n=this.patch_addPadding(t);e=n+e+n,this.patch_splitMax(t);for(var i=0,r=[],f=0;f<t.length;f++){var h,s,a=t[f].start2+i,l=this.diff_text1(t[f].diffs),g=-1;if(l.length>this.Match_MaxBits?-1!=(h=this.match_main(e,l.substring(0,this.Match_MaxBits),a))&&(-1==(g=this.match_main(e,l.substring(l.length-this.Match_MaxBits),a+l.length-this.Match_MaxBits))||h>=g)&&(h=-1):h=this.match_main(e,l,a),-1==h){r[f]=!1,i-=t[f].length2-t[f].length1}else if(r[f]=!0,i=h-a,l==(s=-1==g?e.substring(h,h+l.length):e.substring(h,g+this.Match_MaxBits))){e=e.substring(0,h)+this.diff_text2(t[f].diffs)+e.substring(h+l.length)}else{var o=this.diff_main(l,s,!1);if(l.length>this.Match_MaxBits&&this.diff_levenshtein(o)/l.length>this.Patch_DeleteThreshold){r[f]=!1}else{this.diff_cleanupSemanticLossless(o);for(var c,u=0,p=0;p<t[f].diffs.length;p++){var d=t[f].diffs[p];0!==d[0]&&(c=this.diff_xIndex(o,u)),1===d[0]?e=e.substring(0,h+c)+d[1]+e.substring(h+c):-1===d[0]&&(e=e.substring(0,h+c)+e.substring(h+this.diff_xIndex(o,u+d[1].length))),-1!==d[0]&&(u+=d[1].length)}}}}return[e=e.substring(n.length,e.length-n.length),r]},e.prototype.patch_addPadding=function(t){for(var n=this.Patch_Margin,i="",r=1;r<=n;r++){i+=String.fromCharCode(r)}for(r=0;r<t.length;r++){t[r].start1+=n,t[r].start2+=n}var f=t[0],h=f.diffs;if(0==h.length||0!=h[0][0]){h.unshift(new e.Diff(0,i)),f.start1-=n,f.start2-=n,f.length1+=n,f.length2+=n}else if(n>h[0][1].length){var s=n-h[0][1].length;h[0][1]=i.substring(h[0][1].length)+h[0][1],f.start1-=s,f.start2-=s,f.length1+=s,f.length2+=s}return 0==(h=(f=t[t.length-1]).diffs).length||0!=h[h.length-1][0]?(h.push(new e.Diff(0,i)),f.length1+=n,f.length2+=n):n>h[h.length-1][1].length&&(s=n-h[h.length-1][1].length,h[h.length-1][1]+=i.substring(0,s),f.length1+=s,f.length2+=s),i},e.prototype.patch_splitMax=function(t){for(var n=this.Match_MaxBits,i=0;i<t.length;i++){if(!(t[i].length1<=n)){var r=t[i];t.splice(i--,1);for(var f=r.start1,h=r.start2,s="";0!==r.diffs.length;){var a=new e.patch_obj,l=!0;for(a.start1=f-s.length,a.start2=h-s.length,""!==s&&(a.length1=a.length2=s.length,a.diffs.push(new e.Diff(0,s)));0!==r.diffs.length&&a.length1<n-this.Patch_Margin;){var g=r.diffs[0][0],o=r.diffs[0][1];1===g?(a.length2+=o.length,h+=o.length,a.diffs.push(r.diffs.shift()),l=!1):-1===g&&1==a.diffs.length&&0==a.diffs[0][0]&&o.length>2*n?(a.length1+=o.length,f+=o.length,l=!1,a.diffs.push(new e.Diff(g,o)),r.diffs.shift()):(o=o.substring(0,n-a.length1-this.Patch_Margin),a.length1+=o.length,f+=o.length,0===g?(a.length2+=o.length,h+=o.length):l=!1,a.diffs.push(new e.Diff(g,o)),o==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(o.length))}s=(s=this.diff_text2(a.diffs)).substring(s.length-this.Patch_Margin);var c=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==c&&(a.length1+=c.length,a.length2+=c.length,0!==a.diffs.length&&0===a.diffs[a.diffs.length-1][0]?a.diffs[a.diffs.length-1][1]+=c:a.diffs.push(new e.Diff(0,c))),l||t.splice(++i,0,a)}}}},e.prototype.patch_toText=function(t){for(var e=[],n=0;n<t.length;n++){e[n]=t[n]}return e.join("")},e.prototype.patch_fromText=function(t){var n=[];if(!t){return n}for(var i=t.split("\n"),r=0,f=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<i.length;){var h=i[r].match(f);if(!h){throw new Error("Invalid patch string: "+i[r])}var s=new e.patch_obj;for(n.push(s),s.start1=parseInt(h[1],10),""===h[2]?(s.start1--,s.length1=1):"0"==h[2]?s.length1=0:(s.start1--,s.length1=parseInt(h[2],10)),s.start2=parseInt(h[3],10),""===h[4]?(s.start2--,s.length2=1):"0"==h[4]?s.length2=0:(s.start2--,s.length2=parseInt(h[4],10)),r++;r<i.length;){var a=i[r].charAt(0);try{var l=decodeURI(i[r].substring(1))}catch(g){throw new Error("Illegal escape in patch_fromText: "+l)}if("-"==a){s.diffs.push(new e.Diff(-1,l))}else if("+"==a){s.diffs.push(new e.Diff(1,l))}else if(" "==a){s.diffs.push(new e.Diff(0,l))}else{if("@"==a){break}if(""!==a){throw new Error('Invalid patch mode "'+a+'" in: '+l)}}r++}}return n},e.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},e.patch_obj.prototype.toString=function(){for(var t,e=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],n=0;n<this.diffs.length;n++){switch(this.diffs[n][0]){case 1:t="+";break;case-1:t="-";break;case 0:t=" "}e[n+1]=t+encodeURI(this.diffs[n][1])+"\n"}return e.join("").replace(/%20/g," ")},(t=e).diff_match_patch=e,t.DIFF_DELETE=-1,t.DIFF_INSERT=1,t.DIFF_EQUAL=0});
